<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; margin: 2cm; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 1em; }
    td { padding: 4px; }
    .image-container { margin-top: 1em; text-align: center; }
    .image-container img { width: 50%; max-height: 300px; margin: 0.5em 0; object-fit: contain; }
    .notes { margin-top: 2em; }
    .footer { margin-top: 3em; font-size: 0.9em; color: #555; text-align: center; }
  </style>
</head>
<body>
  <h1>Retinal Fundus Image Segmentation Report</h1>

  <table>
    <tr>
      <td><strong>Patient ID:</strong> {{ patient_id }}</td>
      <td><strong>Age:</strong> {{ age }}</td>
      <td><strong>Sex:</strong> {{ sex }}</td>
    </tr>
    <tr>
      <td><strong>Date:</strong> {{ exam_date }}</td>
      <td><strong>Time:</strong> {{ exam_time }}</td>
      <td><strong>Operator:</strong> Auto</td>
    </tr>
  </table>

  <div class="image-container">
    <h2>Original Image</h2>
    <img src="data:image/png;base64,{{ orig_base64 }}">
    <h2>Processed Segmentation</h2>
    <img src="data:image/png;base64,{{ proc_base64 }}">
  </div>

  <table>
    <tr>
      <td><strong>Model Used:</strong></td>
      <td>{{ model_name }}</td>
    </tr>
    <tr>
      <td><strong>Processing Time:</strong></td>
      <td>{{ processing_time }}</td>
    </tr>
  </table>

  <div class="notes">
    <h3>Clinician Notes:</h3>
    <p>__________________________________________________</p>
    <p>__________________________________________________</p>
  </div>

  <div class="footer">
    <p>This report is automatically generated and intended for research purposes only.</p>
    <p>&copy; {{ year }} NeviSight Project</p>
  </div>
</body>
</html>
